<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/level_up_app/data/FavoritesRepository.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/level_up_app/data/FavoritesRepository.kt" />
              <option name="updatedContent" value="package com.example.level_up_app.data&#10;&#10;import androidx.compose.runtime.mutableStateListOf&#10;&#10;object FavoritesRepository {&#10;    private val _favorites = mutableStateListOf&lt;Product&gt;()&#10;    val favorites: List&lt;Product&gt; get() = _favorites&#10;&#10;    fun addToFavorites(product: Product) {&#10;        // Verificar si el producto ya estÃ¡ en favoritos&#10;        if (!_favorites.any { it.id == product.id }) {&#10;            _favorites.add(product)&#10;        }&#10;    }&#10;&#10;    fun removeFromFavorites(productId: String) {&#10;        _favorites.removeAll { it.id == productId }&#10;    }&#10;&#10;    fun isFavorite(productId: String): Boolean {&#10;        return _favorites.any { it.id == productId }&#10;    }&#10;&#10;    fun toggleFavorite(product: Product) {&#10;        if (isFavorite(product.id)) {&#10;            removeFromFavorites(product.id)&#10;        } else {&#10;            addToFavorites(product)&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/level_up_app/data/model/User.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/level_up_app/data/model/User.kt" />
              <option name="updatedContent" value="package com.example.level_up_app.data.model&#10;&#10;import kotlinx.serialization.Serializable&#10;&#10;@Serializable&#10;data class User(&#10;    val id: Int? = null,&#10;    val name: String,&#10;    val email: String,&#10;    val clave: String,&#10;    val isAdmin: Boolean = false,&#10;    val createdAt: String? = null&#10;)&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/level_up_app/data/repository/UserRepository.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/level_up_app/data/repository/UserRepository.kt" />
              <option name="updatedContent" value="package com.example.level_up_app.data.repository&#10;&#10;import com.example.level_up_app.data.model.User&#10;import com.example.level_up_app.data.network.RetrofitClient&#10;&#10;class UserRepository {&#10;    private val api = RetrofitClient.apiService&#10;&#10;    suspend fun getAllUsers(): Result&lt;List&lt;User&gt;&gt; = runCatching {&#10;        val response = api.getAllUsers()&#10;        if (!response.isSuccessful) error(&quot;HTTP ${response.code()}&quot;)&#10;        response.body() ?: error(&quot;Empty body&quot;)&#10;    }&#10;&#10;    suspend fun createUser(user: User): Result&lt;User&gt; = runCatching {&#10;        val response = api.createUser(user)&#10;        if (!response.isSuccessful) error(&quot;HTTP ${response.code()}&quot;)&#10;        response.body() ?: error(&quot;Empty body&quot;)&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/level_up_app/ui/screen/UserScreens.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/level_up_app/ui/screen/UserScreens.kt" />
              <option name="updatedContent" value="package com.example.level_up_app.ui.screen&#10;&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.material3.Button&#10;import androidx.compose.material3.CircularProgressIndicator&#10;import androidx.compose.material3.OutlinedTextField&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.unit.dp&#10;import androidx.lifecycle.viewmodel.compose.viewModel&#10;import com.example.level_up_app.ui.viewmodel.UserUiState&#10;import com.example.level_up_app.ui.viewmodel.UserViewModel&#10;&#10;@Composable&#10;fun UserListScreen(viewModel: UserViewModel = viewModel()) {&#10;    val state by viewModel.state.collectAsState()&#10;&#10;    LaunchedEffect(Unit) { viewModel.loadUsers() }&#10;&#10;    when (val s = state) {&#10;        is UserUiState.Idle -&gt; Text(&quot;Cargando usuarios...&quot;)&#10;        is UserUiState.Loading -&gt; CircularProgressIndicator()&#10;        is UserUiState.Success -&gt; {&#10;            LazyColumn(modifier = Modifier.padding(16.dp)) {&#10;                items(s.users) { u -&gt;&#10;                    Text(&quot;${u.name} - ${u.email}&quot;)&#10;                }&#10;            }&#10;        }&#10;        is UserUiState.Error -&gt; Text(&quot;Error: ${s.message}&quot;)&#10;    }&#10;}&#10;&#10;@Composable&#10;fun CreateUserScreen(viewModel: UserViewModel = viewModel()) {&#10;    val name = remember { mutableStateOf(&quot;&quot;) }&#10;    val email = remember { mutableStateOf(&quot;&quot;) }&#10;    val clave = remember { mutableStateOf(&quot;&quot;) }&#10;&#10;    Column(modifier = Modifier.padding(16.dp)) {&#10;        OutlinedTextField(value = name.value, onValueChange = { name.value = it }, label = { Text(&quot;Nombre&quot;) })&#10;        Spacer(modifier = Modifier.height(8.dp))&#10;        OutlinedTextField(value = email.value, onValueChange = { email.value = it }, label = { Text(&quot;Email&quot;) })&#10;        Spacer(modifier = Modifier.height(8.dp))&#10;        OutlinedTextField(value = clave.value, onValueChange = { clave.value = it }, label = { Text(&quot;Clave&quot;) })&#10;        Spacer(modifier = Modifier.height(16.dp))&#10;        Button(onClick = { viewModel.addUser(name.value, email.value, clave.value) }) {&#10;            Text(&quot;Crear usuario&quot;)&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/level_up_app/ui/viewmodel/UserViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/level_up_app/ui/viewmodel/UserViewModel.kt" />
              <option name="updatedContent" value="package com.example.level_up_app.ui.viewmodel&#10;&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import com.example.level_up_app.data.model.User&#10;import com.example.level_up_app.data.repository.UserRepository&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.asStateFlow&#10;import kotlinx.coroutines.launch&#10;&#10;sealed class UserUiState {&#10;    object Idle : UserUiState()&#10;    object Loading : UserUiState()&#10;    data class Success(val users: List&lt;User&gt;) : UserUiState()&#10;    data class Error(val message: String) : UserUiState()&#10;}&#10;&#10;class UserViewModel : ViewModel() {&#10;    private val repo = UserRepository()&#10;&#10;    private val _state = MutableStateFlow&lt;UserUiState&gt;(UserUiState.Idle)&#10;    val state: StateFlow&lt;UserUiState&gt; = _state.asStateFlow()&#10;&#10;    fun loadUsers() {&#10;        viewModelScope.launch {&#10;            _state.value = UserUiState.Loading&#10;            repo.getAllUsers()&#10;                .onSuccess { _state.value = UserUiState.Success(it) }&#10;                .onFailure { _state.value = UserUiState.Error(it.message ?: &quot;Error desconocido&quot;) }&#10;        }&#10;    }&#10;&#10;    fun addUser(name: String, email: String, clave: String, isAdmin: Boolean = false) {&#10;        viewModelScope.launch {&#10;            _state.value = UserUiState.Loading&#10;            repo.createUser(User(name = name, email = email, clave = clave, isAdmin = isAdmin))&#10;                .onSuccess {&#10;                    // tras crear, refrescar lista&#10;                    loadUsers()&#10;                }&#10;                .onFailure { _state.value = UserUiState.Error(it.message ?: &quot;Error desconocido&quot;) }&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>